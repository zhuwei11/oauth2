(function(){$.extend(jQuery.fn,{config:{noSameClass:"",emptyClass:"",customVaild:function(){return !0}},setConfig:function(d,c){this.config[d]=c},validateItem:function(v,u,t,r,q,n,s){function p(b,c){if(b){return o.parent().removeClass(u).removeClass(t).removeClass(r).removeClass(q),o.parent().addClass(c),!0}o.parent().removeClass(c)}var o=this;if(v&&0<$("."+u+", ."+t+", ."+r,s).length){return !1}s=this.attr("isRequired");v=this.val();"password"!=this.attr("type")&&(v=$.trim(v));var m=this.attr("repeat");if(m&&(v=$(m).val(),"password"!=this.attr("type")&&(v=$.trim(v)),p(this.val()!==v,r))||p(s&&0==v.length,u)){return !1}s=this.attr("rule");if(null!=s){for(var m=!0,l=0,s=s.split("{$}");l<s.length;){if(!RegExp(s[l++]).test(v)){m=!1;p(!0,t);break}}m&&p(!1,t)}v=this.parent();!v.hasClass(u)&&!v.hasClass(t)&&!v.hasClass(r)?(v.addClass(q),n||$(this).trigger("afterValidate")):(v.removeClass(q),n||$(this).trigger("afterValidateFailed"))},submit:function(){var b=this;setTimeout(function(){b.config.customVaild()&&b.dom&&b.dom.submit()},20)},validate:function(g,d,l,k,j){var h=this,d=d||"empty",l=l||"error",k=k||"repeat",j=j||"succ";"FORM"==this[0].tagName.toUpperCase()&&($(".item",this).bind("blur",function(){$(this).validateItem(!1,d,l,k,j)}).bind("focus",function(){$(this).parent().removeClass([d,l,k,j].join(" "))}),this.bind("submit",function(){var b=$(this).find("input[type=submit]");b.attr("disabled","true");$(this).config.customVaild();var e=$(".item",this);$(".item",this).blur();for(var c=0;c<e.length;c++){$(e[c]).validateItem(!1,d,l,k,j)}e=$(".item",this).parent();if(h.config.noSameClass&&e.hasClass(h.config.noSameClass)||0<$("."+d+", ."+l+", ."+k,this).length){return b.attr("disabled",""),!1}}))}})})();